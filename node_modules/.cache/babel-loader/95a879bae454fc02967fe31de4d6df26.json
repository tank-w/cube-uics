{"remainingRequest":"/Users/apple/www/vue/elmapp/node_modules/babel-loader/lib/index.js??ref--16-1!/Users/apple/www/vue/elmapp/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/apple/www/vue/elmapp/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/apple/www/vue/elmapp/node_modules/cube-ui/src/components/rate/rate.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/apple/www/vue/elmapp/node_modules/cube-ui/src/components/rate/rate.vue","mtime":499162500000},{"path":"/Users/apple/www/vue/elmapp/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/apple/www/vue/elmapp/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/apple/www/vue/elmapp/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/apple/www/vue/elmapp/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5kZXgtb2YiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5udW1iZXIuY29uc3RydWN0b3IiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgQ3ViZVJhdGVJdGVtIGZyb20gJy4vcmF0ZS1pdGVtLnZ1ZSc7CnZhciBDT01QT05FTlRfTkFNRSA9ICdjdWJlLXJhdGUnOwp2YXIgRVZFTlRfSU5QVVQgPSAnaW5wdXQnOwp2YXIgRVZFTlRfVFlQRV9NT1VTRSA9ICdtb3VzZSc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiBDT01QT05FTlRfTkFNRSwKICBwcm9wczogewogICAgdmFsdWU6IHsKICAgICAgdHlwZTogTnVtYmVyLAogICAgICBkZWZhdWx0OiAwCiAgICB9LAogICAgbWF4OiB7CiAgICAgIHR5cGU6IE51bWJlciwKICAgICAgZGVmYXVsdDogNQogICAgfSwKICAgIGRpc2FibGVkOiB7CiAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IGZhbHNlCiAgICB9LAogICAganVzdGlmeTogewogICAgICB0eXBlOiBCb29sZWFuLAogICAgICBkZWZhdWx0OiBmYWxzZQogICAgfQogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHRlbXBWYWx1ZTogdGhpcy52YWx1ZQogICAgfTsKICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICB0aGlzLm1vdXNlUHJlc3NlZCA9IGZhbHNlOwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIHJhdGVDbGFzczogZnVuY3Rpb24gcmF0ZUNsYXNzKCkgewogICAgICByZXR1cm4gdGhpcy5qdXN0aWZ5ICYmICdjdWJlLXJhdGUtanVzdGlmeSc7CiAgICB9CiAgfSwKICB3YXRjaDogewogICAgdmFsdWU6IGZ1bmN0aW9uIHZhbHVlKHZhbCkgewogICAgICBpZiAodmFsICE9PSB0aGlzLnRlbXBWYWx1ZSkgewogICAgICAgIHRoaXMudGVtcFZhbHVlID0gdmFsOwogICAgICB9CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBoYW5kbGVTdGFydDogZnVuY3Rpb24gaGFuZGxlU3RhcnQoZSkgewogICAgICBpZiAoIXRoaXMuZGlzYWJsZWQpIHsKICAgICAgICBpZiAoZS50eXBlLmluZGV4T2YoRVZFTlRfVFlQRV9NT1VTRSkgPiAtMSkgewogICAgICAgICAgdGhpcy5tb3VzZVByZXNzZWQgPSB0cnVlOwogICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIHRoaXMuaGFuZGxlRW5kKTsKICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIHRoaXMuaGFuZGxlTW92ZSk7CiAgICAgICAgfQoKICAgICAgICB2YXIgcmVjdCA9IHRoaXMuJHJlZnMucmF0ZUNvbnRhaW5lci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTsKICAgICAgICB0aGlzLmxlZnQgPSByZWN0LmxlZnQ7CiAgICAgICAgdGhpcy5jb250YWluZXJXaWR0aCA9IHJlY3Qud2lkdGg7CiAgICAgIH0KICAgIH0sCiAgICBoYW5kbGVNb3ZlOiBmdW5jdGlvbiBoYW5kbGVNb3ZlKGUpIHsKICAgICAgaWYgKCF0aGlzLmRpc2FibGVkICYmIChlLnR5cGUuaW5kZXhPZihFVkVOVF9UWVBFX01PVVNFKSA9PT0gLTEgfHwgdGhpcy5tb3VzZVByZXNzZWQpKSB7CiAgICAgICAgdGhpcy5jb21wdXRlVGVtcFZhbHVlKGUudHlwZS5pbmRleE9mKEVWRU5UX1RZUEVfTU9VU0UpID09PSAtMSA/IGUudG91Y2hlc1swXSA6IGUpOwogICAgICB9CiAgICB9LAogICAgaGFuZGxlRW5kOiBmdW5jdGlvbiBoYW5kbGVFbmQoZSkgewogICAgICBpZiAoIXRoaXMuZGlzYWJsZWQgJiYgKGUudHlwZS5pbmRleE9mKEVWRU5UX1RZUEVfTU9VU0UpID09PSAtMSB8fCB0aGlzLm1vdXNlUHJlc3NlZCkpIHsKICAgICAgICBpZiAoZS50eXBlLmluZGV4T2YoRVZFTlRfVFlQRV9NT1VTRSkgPiAtMSkgewogICAgICAgICAgdGhpcy5tb3VzZVByZXNzZWQgPSBmYWxzZTsKICAgICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCB0aGlzLmhhbmRsZUVuZCk7CiAgICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCB0aGlzLmhhbmRsZU1vdmUpOwogICAgICAgIH0KCiAgICAgICAgdGhpcy5jb21wdXRlVGVtcFZhbHVlKGUudHlwZS5pbmRleE9mKEVWRU5UX1RZUEVfTU9VU0UpID4gLTEgPyBlIDogZS5jaGFuZ2VkVG91Y2hlc1swXSk7CiAgICAgICAgdGhpcy4kZW1pdChFVkVOVF9JTlBVVCwgdGhpcy50ZW1wVmFsdWUpOwogICAgICB9CiAgICB9LAogICAgY29tcHV0ZVRlbXBWYWx1ZTogZnVuY3Rpb24gY29tcHV0ZVRlbXBWYWx1ZSh0b3VjaCkgewogICAgICB2YXIgbGVmdEFtb3VudCA9IE1hdGguY2VpbCgodG91Y2guY2xpZW50WCAtIHRoaXMubGVmdCkgLyB0aGlzLmNvbnRhaW5lcldpZHRoICogdGhpcy5tYXgpOwoKICAgICAgaWYgKGxlZnRBbW91bnQgPiAwICYmIGxlZnRBbW91bnQgPD0gdGhpcy5tYXgpIHsKICAgICAgICB0aGlzLnRlbXBWYWx1ZSA9IGxlZnRBbW91bnQ7CiAgICAgIH0gZWxzZSBpZiAobGVmdEFtb3VudCA8PSAwKSB7CiAgICAgICAgdGhpcy50ZW1wVmFsdWUgPSAwOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMudGVtcFZhbHVlID0gdGhpcy5tYXg7CiAgICAgIH0KICAgIH0KICB9LAogIGNvbXBvbmVudHM6IHsKICAgIEN1YmVSYXRlSXRlbTogQ3ViZVJhdGVJdGVtCiAgfQp9Ow=="},{"version":3,"sources":["rate.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <!-- the preventDefault of touchmove is to prevent any default action caused by any touchmove event associated with the same active touch point, such as scrolling. -->\n  <ul ref=\"rateContainer\"\n      class=\"cube-rate\"\n      :class=\"rateClass\"\n      @touchstart.stop=\"handleStart\"\n      @touchmove.stop.prevent=\"handleMove\"\n      @touchend.stop=\"handleEnd\"\n      @mousedown.stop=\"handleStart\"\n      @mousemove.stop=\"handleMove\"\n      @mouseup.stop=\"handleEnd\">\n      <slot>\n        <cube-rate-item v-for=\"n in max\" :key=\"n\" :index=\"n\"></cube-rate-item>\n      </slot>\n    </ul>\n</template>\n\n<script type=\"text/ecmascript-6\">\n  import CubeRateItem from './rate-item.vue'\n  const COMPONENT_NAME = 'cube-rate'\n  const EVENT_INPUT = 'input'\n\n  const EVENT_TYPE_MOUSE = 'mouse'\n\n  export default {\n    name: COMPONENT_NAME,\n    props: {\n      value: {\n        type: Number,\n        default: 0\n      },\n      max: {\n        type: Number,\n        default: 5\n      },\n      disabled: {\n        type: Boolean,\n        default: false\n      },\n      justify: {\n        type: Boolean,\n        default: false\n      }\n    },\n    data() {\n      return {\n        tempValue: this.value\n      }\n    },\n    created() {\n      this.mousePressed = false\n    },\n    computed: {\n      rateClass() {\n        return this.justify && 'cube-rate-justify'\n      }\n    },\n    watch: {\n      value(val) {\n        if (val !== this.tempValue) {\n          this.tempValue = val\n        }\n      }\n    },\n    methods: {\n      handleStart(e) {\n        if (!this.disabled) {\n          if (e.type.indexOf(EVENT_TYPE_MOUSE) > -1) {\n            this.mousePressed = true\n            document.addEventListener('mouseup', this.handleEnd)\n            document.addEventListener('mousemove', this.handleMove)\n          }\n          const rect = this.$refs.rateContainer.getBoundingClientRect()\n          this.left = rect.left\n          this.containerWidth = rect.width\n        }\n      },\n      handleMove(e) {\n        if (!this.disabled && (e.type.indexOf(EVENT_TYPE_MOUSE) === -1 || this.mousePressed)) {\n          this.computeTempValue(e.type.indexOf(EVENT_TYPE_MOUSE) === -1 ? e.touches[0] : e)\n        }\n      },\n      handleEnd(e) {\n        if (!this.disabled && (e.type.indexOf(EVENT_TYPE_MOUSE) === -1 || this.mousePressed)) {\n          if (e.type.indexOf(EVENT_TYPE_MOUSE) > -1) {\n            this.mousePressed = false\n            document.removeEventListener('mouseup', this.handleEnd)\n            document.removeEventListener('mousemove', this.handleMove)\n          }\n          this.computeTempValue(e.type.indexOf(EVENT_TYPE_MOUSE) > -1 ? e : e.changedTouches[0])\n          this.$emit(EVENT_INPUT, this.tempValue)\n        }\n      },\n      computeTempValue(touch) {\n        let leftAmount = Math.ceil((touch.clientX - this.left) / this.containerWidth * this.max)\n        if (leftAmount > 0 && leftAmount <= this.max) {\n          this.tempValue = leftAmount\n        } else if (leftAmount <= 0) {\n          this.tempValue = 0\n        } else {\n          this.tempValue = this.max\n        }\n      }\n    },\n    components: {\n      CubeRateItem\n    }\n  }\n</script>\n\n<style lang=\"stylus\" rel=\"stylesheet/stylus\">\n  @require \"../../common/stylus/variable.styl\"\n\n  .cube-rate\n    list-style: none\n    display: inline-flex\n    vertical-align: top\n    flex-wrap: nowrap\n    max-width: 100%\n  .cube-rate-justify\n    width: 100%\n    justify-content: space-between\n</style>\n"],"sourceRoot":"node_modules/cube-ui/src/components/rate"}]}