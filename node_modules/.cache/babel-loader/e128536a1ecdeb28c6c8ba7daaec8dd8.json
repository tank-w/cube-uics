{"remainingRequest":"/Users/apple/www/vue/elmapp/node_modules/babel-loader/lib/index.js!/Users/apple/www/vue/elmapp/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/apple/www/vue/elmapp/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/apple/www/vue/elmapp/node_modules/cube-ui/src/components/scroll-nav-bar/scroll-nav-bar.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/apple/www/vue/elmapp/node_modules/cube-ui/src/components/scroll-nav-bar/scroll-nav-bar.vue","mtime":499162500000},{"path":"/Users/apple/www/vue/elmapp/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/apple/www/vue/elmapp/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/apple/www/vue/elmapp/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/apple/www/vue/elmapp/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZXZlcnkiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5udW1iZXIuY29uc3RydWN0b3IiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgc2Nyb2xsTWl4aW4gZnJvbSAnLi4vLi4vY29tbW9uL21peGlucy9zY3JvbGwnOwppbXBvcnQgQ3ViZVNjcm9sbCBmcm9tICcuLi9zY3JvbGwvc2Nyb2xsLnZ1ZSc7CnZhciBESVJFQ1RJT05fSCA9ICdob3Jpem9udGFsJzsKdmFyIERJUkVDVElPTl9WID0gJ3ZlcnRpY2FsJzsKdmFyIENPTVBPTkVOVF9OQU1FID0gJ2N1YmUtc2Nyb2xsLW5hdi1iYXInOwp2YXIgRVZFTlRfQ0hBTkdFID0gJ2NoYW5nZSc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiBDT01QT05FTlRfTkFNRSwKICBpbmplY3Q6IHsKICAgIHNjcm9sbE5hdjogewogICAgICBkZWZhdWx0OiBudWxsCiAgICB9CiAgfSwKICBtaXhpbnM6IFtzY3JvbGxNaXhpbl0sCiAgcHJvcHM6IHsKICAgIGRpcmVjdGlvbjogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6IERJUkVDVElPTl9ILAogICAgICB2YWxpZGF0b3I6IGZ1bmN0aW9uIHZhbGlkYXRvcih2YWwpIHsKICAgICAgICByZXR1cm4gdmFsID09PSBESVJFQ1RJT05fSCB8fCB2YWwgPT09IERJUkVDVElPTl9WOwogICAgICB9CiAgICB9LAogICAgbGFiZWxzOiB7CiAgICAgIHR5cGU6IEFycmF5LAogICAgICBkZWZhdWx0OiBmdW5jdGlvbiBfZGVmYXVsdCgpIHsKICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqLwogICAgICAgIHJldHVybiBbXTsKICAgICAgfQogICAgfSwKICAgIHR4dHM6IHsKICAgICAgdHlwZTogQXJyYXksCiAgICAgIGRlZmF1bHQ6IGZ1bmN0aW9uIF9kZWZhdWx0KCkgewogICAgICAgIHRoaXMuX2RlZmF1bHRUeHRzID0gdHJ1ZTsKICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqLwoKICAgICAgICByZXR1cm4gdGhpcy5sYWJlbHM7CiAgICAgIH0KICAgIH0sCiAgICBjdXJyZW50OiB7CiAgICAgIHR5cGU6IFtTdHJpbmcsIE51bWJlcl0sCiAgICAgIGRlZmF1bHQ6ICcnCiAgICB9CiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgYWN0aXZlOiB0aGlzLmN1cnJlbnQsCiAgICAgIHVzZWRUeHRzOiB0aGlzLnR4dHMKICAgIH07CiAgfSwKICB3YXRjaDogewogICAgbGFiZWxzOiBmdW5jdGlvbiBsYWJlbHMobmV3TGFiZWxzKSB7CiAgICAgIGlmICh0aGlzLl9kZWZhdWx0VHh0cykgewogICAgICAgIHRoaXMudXNlZFR4dHMgPSBuZXdMYWJlbHM7CiAgICAgIH0KICAgIH0sCiAgICB0eHRzOiBmdW5jdGlvbiB0eHRzKG5ld1R4dHMpIHsKICAgICAgdGhpcy51c2VkVHh0cyA9IG5ld1R4dHM7CiAgICB9LAogICAgY3VycmVudDogZnVuY3Rpb24gY3VycmVudChuZXdWYWwpIHsKICAgICAgdGhpcy5hY3RpdmUgPSBuZXdWYWw7CiAgICB9LAogICAgYWN0aXZlOiBmdW5jdGlvbiBhY3RpdmUobmV3VmFsKSB7CiAgICAgIHRoaXMuJGVtaXQoRVZFTlRfQ0hBTkdFLCBuZXdWYWwpOwoKICAgICAgdGhpcy5fYWRqdXN0KCk7CiAgICB9CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgdmFyIF90aGlzID0gdGhpczsKCiAgICB0aGlzLnNjcm9sbE5hdiAmJiB0aGlzLnNjcm9sbE5hdi5zZXRCYXIodGhpcyk7CgogICAgaWYgKHRoaXMuYWN0aXZlKSB7CiAgICAgIC8vIHdhaXRpbmcgcGFuZWxzIGxvYWRlZAogICAgICB0aGlzLiRuZXh0VGljayhmdW5jdGlvbiAoKSB7CiAgICAgICAgX3RoaXMuX2FkanVzdCgpOwogICAgICB9KTsKICAgIH0KICB9LAogIGJlZm9yZURlc3Ryb3k6IGZ1bmN0aW9uIGJlZm9yZURlc3Ryb3koKSB7CiAgICB0aGlzLnNjcm9sbE5hdiAmJiB0aGlzLnNjcm9sbE5hdi5zZXRCYXIobnVsbCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBjbGlja0hhbmRsZXI6IGZ1bmN0aW9uIGNsaWNrSGFuZGxlcihsYWJlbCkgewogICAgICBpZiAobGFiZWwgPT09IHRoaXMuYWN0aXZlKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB0aGlzLmFjdGl2ZSA9IGxhYmVsOwogICAgICB0aGlzLnNjcm9sbE5hdiAmJiB0aGlzLnNjcm9sbE5hdi5iYXJDaGFuZ2UobGFiZWwpOwogICAgfSwKICAgIHJlZnJlc2g6IGZ1bmN0aW9uIHJlZnJlc2goKSB7CiAgICAgIHRoaXMuJHJlZnMuc2Nyb2xsLnJlZnJlc2goKTsKCiAgICAgIHRoaXMuX2FkanVzdCgpOwogICAgfSwKICAgIF9hZGp1c3Q6IGZ1bmN0aW9uIF9hZGp1c3QoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgLy8gd2FpdGluZyB1aQogICAgICB0aGlzLiRuZXh0VGljayhmdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIGlzSG9yaXpvbnRhbCA9IF90aGlzMi5kaXJlY3Rpb24gPT09IERJUkVDVElPTl9IOwogICAgICAgIHZhciB0YXJnZXRQcm9wID0gaXNIb3Jpem9udGFsID8gJ2NsaWVudFdpZHRoJyA6ICdjbGllbnRIZWlnaHQnOwogICAgICAgIHZhciBhY3RpdmUgPSBfdGhpczIuYWN0aXZlOwogICAgICAgIHZhciB2aWV3cG9ydFNpemUgPSBfdGhpczIuJHJlZnMuc2Nyb2xsLiRlbFt0YXJnZXRQcm9wXTsKICAgICAgICB2YXIgaXRlbXNFbGUgPSBfdGhpczIuJHJlZnMuaXRlbXM7CiAgICAgICAgdmFyIHNjcm9sbGVyU2l6ZSA9IGl0ZW1zRWxlW3RhcmdldFByb3BdOwogICAgICAgIHZhciBtaW5UcmFuc2xhdGUgPSBNYXRoLm1pbigwLCB2aWV3cG9ydFNpemUgLSBzY3JvbGxlclNpemUpOwogICAgICAgIHZhciBtaWRkbGVUcmFuc2xhdGUgPSB2aWV3cG9ydFNpemUgLyAyOwogICAgICAgIHZhciBpdGVtcyA9IGl0ZW1zRWxlLmNoaWxkcmVuOwogICAgICAgIHZhciBzaXplID0gMDsKCiAgICAgICAgX3RoaXMyLmxhYmVscy5ldmVyeShmdW5jdGlvbiAobGFiZWwsIGluZGV4KSB7CiAgICAgICAgICBpZiAobGFiZWwgPT09IGFjdGl2ZSkgewogICAgICAgICAgICBzaXplICs9IGl0ZW1zW2luZGV4XVt0YXJnZXRQcm9wXSAvIDI7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgIH0KCiAgICAgICAgICBzaXplICs9IGl0ZW1zW2luZGV4XVt0YXJnZXRQcm9wXTsKICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0pOwoKICAgICAgICB2YXIgdHJhbnNsYXRlID0gbWlkZGxlVHJhbnNsYXRlIC0gc2l6ZTsKICAgICAgICB0cmFuc2xhdGUgPSBNYXRoLm1heChtaW5UcmFuc2xhdGUsIE1hdGgubWluKDAsIHRyYW5zbGF0ZSkpOwoKICAgICAgICBfdGhpczIuJHJlZnMuc2Nyb2xsLnNjcm9sbFRvKGlzSG9yaXpvbnRhbCA/IHRyYW5zbGF0ZSA6IDAsIGlzSG9yaXpvbnRhbCA/IDAgOiB0cmFuc2xhdGUsIDMwMCk7CiAgICAgIH0pOwogICAgfQogIH0sCiAgY29tcG9uZW50czogewogICAgQ3ViZVNjcm9sbDogQ3ViZVNjcm9sbAogIH0KfTs="},{"version":3,"sources":["scroll-nav-bar.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"cube-scroll-nav-bar\" :class=\"'cube-scroll-nav-bar_' + direction\">\n    <cube-scroll\n      ref=\"scroll\"\n      nestMode=\"none\"\n      :options=\"options\"\n      :direction=\"direction\">\n      <div class=\"cube-scroll-nav-bar-items\" ref=\"items\">\n        <div\n          class=\"cube-scroll-nav-bar-item\"\n          v-for=\"(txt, index) in usedTxts\"\n          :key=\"index\"\n          :class=\"{'cube-scroll-nav-bar-item_active': active === labels[index]}\"\n          @click=\"clickHandler(labels[index])\">\n          <slot\n            :txt=\"txt\"\n            :index=\"index\"\n            :active=\"active\"\n            :label=\"labels[index]\">\n              <span v-html=\"txt\"></span>\n            </slot>\n        </div>\n      </div>\n    </cube-scroll>\n  </div>\n</template>\n\n<script type=\"text/ecmascript-6\">\n  import scrollMixin from '../../common/mixins/scroll'\n  import CubeScroll from '../scroll/scroll.vue'\n\n  const DIRECTION_H = 'horizontal'\n  const DIRECTION_V = 'vertical'\n\n  const COMPONENT_NAME = 'cube-scroll-nav-bar'\n  const EVENT_CHANGE = 'change'\n\n  export default {\n    name: COMPONENT_NAME,\n    inject: {\n      scrollNav: {\n        default: null\n      }\n    },\n    mixins: [scrollMixin],\n    props: {\n      direction: {\n        type: String,\n        default: DIRECTION_H,\n        validator(val) {\n          return val === DIRECTION_H || val === DIRECTION_V\n        }\n      },\n      labels: {\n        type: Array,\n        default() {\n          /* istanbul ignore next */\n          return []\n        }\n      },\n      txts: {\n        type: Array,\n        default() {\n          this._defaultTxts = true\n          /* istanbul ignore next */\n          return this.labels\n        }\n      },\n      current: {\n        type: [String, Number],\n        default: ''\n      }\n    },\n    data() {\n      return {\n        active: this.current,\n        usedTxts: this.txts\n      }\n    },\n    watch: {\n      labels(newLabels) {\n        if (this._defaultTxts) {\n          this.usedTxts = newLabels\n        }\n      },\n      txts(newTxts) {\n        this.usedTxts = newTxts\n      },\n      current(newVal) {\n        this.active = newVal\n      },\n      active(newVal) {\n        this.$emit(EVENT_CHANGE, newVal)\n        this._adjust()\n      }\n    },\n    mounted() {\n      this.scrollNav && this.scrollNav.setBar(this)\n      if (this.active) {\n        // waiting panels loaded\n        this.$nextTick(() => {\n          this._adjust()\n        })\n      }\n    },\n    beforeDestroy() {\n      this.scrollNav && this.scrollNav.setBar(null)\n    },\n    methods: {\n      clickHandler(label) {\n        if (label === this.active) {\n          return\n        }\n        this.active = label\n        this.scrollNav && this.scrollNav.barChange(label)\n      },\n      refresh() {\n        this.$refs.scroll.refresh()\n        this._adjust()\n      },\n      _adjust() {\n        // waiting ui\n        this.$nextTick(() => {\n          const isHorizontal = this.direction === DIRECTION_H\n          const targetProp = isHorizontal ? 'clientWidth' : 'clientHeight'\n          const active = this.active\n          const viewportSize = this.$refs.scroll.$el[targetProp]\n          const itemsEle = this.$refs.items\n          const scrollerSize = itemsEle[targetProp]\n          const minTranslate = Math.min(0, viewportSize - scrollerSize)\n          const middleTranslate = viewportSize / 2\n          const items = itemsEle.children\n          let size = 0\n          this.labels.every((label, index) => {\n            if (label === active) {\n              size += (items[index][targetProp] / 2)\n              return false\n            }\n            size += items[index][targetProp]\n            return true\n          })\n          let translate = middleTranslate - size\n          translate = Math.max(minTranslate, Math.min(0, translate))\n          this.$refs.scroll.scrollTo(isHorizontal ? translate : 0, isHorizontal ? 0 : translate, 300)\n        })\n      }\n    },\n    components: {\n      CubeScroll\n    }\n  }\n</script>\n\n<style lang=\"stylus\" rel=\"stylesheet/stylus\">\n  @require \"../../common/stylus/variable.styl\"\n\n  .cube-scroll-nav-bar\n    position: relative\n    display: flex\n    color: $scroll-nav-color\n    background-color: $scroll-nav-bgc\n  .cube-scroll-nav-bar_horizontal\n    align-items: center\n    .cube-scroll-wrapper\n      flex: 1\n      text-align: center\n    .cube-scroll-content\n      display: inline-block\n      vertical-align: top\n    .cube-scroll-nav-bar-items\n      white-space: nowrap\n  .cube-scroll-nav-bar_vertical\n    height: 100%\n    justify-content: center\n    text-align: center\n    .cube-scroll-nav-bar-item\n      display: block\n  .cube-scroll-nav-bar-items\n    font-size: $fontsize-medium\n  .cube-scroll-nav-bar-item\n    display: inline-block\n    vertical-align: top\n    padding: 20px 15px\n  .cube-scroll-nav-bar-item_active\n    color: $scroll-nav-active-color\n</style>\n"],"sourceRoot":"node_modules/cube-ui/src/components/scroll-nav-bar"}]}